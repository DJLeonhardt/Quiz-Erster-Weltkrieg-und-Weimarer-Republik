<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz: Erster Weltkrieg & Weimar</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f8ff;
  margin: 0;
  padding: 10px;
  max-width: 900px;
  margin:auto;
}
h1,h2 {text-align:center; color:#003366;}
.frage {
  background:white;
  padding:15px;
  margin:15px 0;
  border-radius:12px;
  box-shadow:0 2px 6px rgba(0,0,0,0.15);
}
label {
  display:block;
  background:#eef4ff;
  padding:8px;
  margin:6px 0;
  border-radius:8px;
}
button {
  width:100%;
  padding:10px;
  margin-top:10px;
  font-size:1rem;
  background:#0059b3;
  color:white;
  border:none;
  border-radius:8px;
}
button:hover {background:#004080;}
img {
  max-width:100%;
  border-radius:8px;
  margin:10px 0;
}
iframe {max-width:100%; border-radius:8px;}
#timer {font-size:1.2rem; text-align:center; font-weight:bold;}
.feedback {margin-top:8px; font-weight:bold;}
</style>
</head>

<body>

<h1>Quiz: Erster Weltkrieg & Weimarer Republik</h1>
<div id="timer">Zeit: 20:00</div>

<div id="quiz"></div>

<h2 id="ergebnis"></h2>
<h2 id="note"></h2>
<h2 id="highscore"></h2>

<div style="text-align:center;">
  <p><b>Name oder Kürzel:</b></p>
  <input id="name" placeholder="z. B. Max M." style="padding:8px;width:80%;">
  <br><br>
  <button onclick="downloadCSV()">Ergebnis herunterladen</button>
</div>

<script>
let timeLeft = 1200;
let score = 0;
let answered = [];

const timer = setInterval(()=>{
  let m = Math.floor(timeLeft/60);
  let s = timeLeft%60;
  document.getElementById("timer").innerText =
    `Zeit: ${m}:${s.toString().padStart(2,"0")}`;
  timeLeft--;
  if(timeLeft<0){clearInterval(timer);}
},1000);

const questions = [

/* 1–10 Erster Weltkrieg */
{t:"mc",q:"Warum war der Imperialismus eine Ursache des Ersten Weltkriegs?",
a:["Macht- und Kolonialkonkurrenz","Friedenspolitik","Demokratisierung","Abrüstung"],
r:[0],e:"Imperialistische Staaten konkurrierten um Macht und Kolonien."},

{t:"mc",q:"Wer erschoss Erzherzog Franz Ferdinand?",
a:["Kaiser Wilhelm II.","Gavrilo Princip","Wladimir Lenin","Otto von Bismarck"],
r:[1],e:"Gavrilo Princip war Mitglied einer nationalistischen Gruppe."},

{t:"mc",q:"Wie war die Stimmung in Deutschland 1914?",
a:["Kriegsbegeisterung","Angst","Ablehnung","Gleichgültigkeit"],
r:[0],e:"Viele hofften auf einen kurzen Sieg."},

{t:"mc",q:"Was bezeichnet man als Bündnissystem?",
a:["Lose Freundschaften","Feste Militärbündnisse","Kolonialverwaltung","Wirtschaftshilfe"],
r:[1],e:"Europa war in feste Militärbündnisse aufgeteilt."},

{t:"cb",q:"Welche Länder gehörten zu den Mittelmächten?",
a:["Deutschland","Österreich-Ungarn","Frankreich","Osmanisches Reich"],
r:[0,1,3],e:"Frankreich gehörte zur Entente."},

{t:"mc",q:"Was war die Feldpost?",
a:["Zensurbehörde","Post zwischen Front und Heimat","Geheimdienst","Militärgericht"],
r:[1],e:"Sie verband Soldaten mit ihren Familien."},

{t:"mc",q:"Warum wurde Feldpost zensiert?",
a:["Schutz von Militärgeheimnissen","Unterhaltung","Propaganda","Steuern"],
r:[0],e:"Militärische Informationen sollten geheim bleiben."},

{t:"cb",q:"Welche neuen Waffen wurden im Ersten Weltkrieg eingesetzt?",
a:["Giftgas","Panzer","Drohnen","Maschinengewehre"],
r:[0,1,3],e:"Drohnen gab es noch nicht."},

{t:"mc",q:"Warum traten die USA 1917 in den Krieg ein?",
a:["Versenkung von Handelsschiffen","Bündnis mit Russland","Gebietsverluste","Revolution"],
r:[0],e:"Deutsche U-Boot-Angriffe waren entscheidend."},

{t:"mc",q:"Was geschah 1918 in Deutschland?",
a:["Sieg","Revolution","Kolonialgewinne","Kaiser gestärkt"],
r:[1],e:"Aufstände führten zum Ende der Monarchie."},

/* Bild Imperialismus */
{t:"img",q:"Was zeigt diese Karikatur?",
img:"https://images.fineartamerica.com/images/artworkimages/mediumlarge/2/the-chinese-cake-1898-artist-henri-print-collector.jpg",
a:["Imperialistische Aufteilung Chinas","Industrialisierung","Friedensverhandlungen","Weltkrieg"],
r:[0],e:"Die Mächte teilen China unter sich auf."},

/* Versailles */
{t:"imgcb",q:"Welche Aussagen zum Versailler Vertrag stimmen?",
img:"https://c1.staticflickr.com/4/3783/10817272745_8b2da29322_b.jpg",
a:["Kriegsschuld für Deutschland","Reparationszahlungen","Deutschland durfte großes Heer behalten","Gebietsverluste"],
r:[0,1,3],e:"Militärisch wurde Deutschland stark eingeschränkt."},

/* Begriffe */
{t:"mc",q:"Was ist Nationalismus?",
a:["Überbetonung der eigenen Nation","Internationale Zusammenarbeit","Frieden","Demokratie"],
r:[0],e:"Nationalismus stellt die eigene Nation über andere."},

{t:"mc",q:"Was ist eine Monarchie?",
a:["Herrschaft eines Königs","Republik","Diktatur","Parlament"],
r:[0],e:"In einer Monarchie herrscht ein König oder Kaiser."},

{t:"mc",q:"Was ist eine Republik?",
a:["Staat ohne König","Militärherrschaft","Adelsherrschaft","Kirchenstaat"],
r:[0],e:"Das Staatsoberhaupt wird gewählt."},

/* Video */
{t:"video",q:"Sieh dir das Video aufmerksam an.",
src:"https://www.youtube.com/embed/QtUHZTtRoRs"},

{t:"mc",q:"Wer durfte in der Weimarer Republik wählen?",
a:["Alle ab 20","Nur Männer","Nur Reiche","Nur Soldaten"],
r:[0],e:"Frauen und Männer hatten Wahlrecht."},

{t:"mc",q:"Wer hatte das höchste Amt?",
a:["Reichskanzler","Reichspräsident","Kaiser","Papst"],
r:[1],e:"Der Reichspräsident hatte große Macht."},

{t:"mc",q:"Warum war die Verfassung teils problematisch?",
a:["Notverordnungen","Kein Parlament","Kein Wahlrecht","Zensur"],
r:[0],e:"Notverordnungen schwächten das Parlament."},

{t:"cb",q:"Welche Grundrechte gab es?",
a:["Meinungsfreiheit","Versammlungsfreiheit","Keine Pressefreiheit","Recht auf Arbeit"],
r:[0,1,3],e:"Die Verfassung enthielt viele Grundrechte."}
];

const quiz = document.getElementById("quiz");

questions.forEach((f,i)=>{
  const d=document.createElement("div");
  d.className="frage";
  d.innerHTML=`<p><b>${i+1}. ${f.q}</b></p>`;
  if(f.img) d.innerHTML+=`<img src="${f.img}">`;
  if(f.src) d.innerHTML+=`<iframe width="560" height="315" src="${f.src}" allowfullscreen></iframe>`;
  if(f.a){
    f.a.forEach((x,j)=>{
      const type = (f.t.includes("cb"))?"checkbox":"radio";
      d.innerHTML+=`<label><input type="${type}" name="q${i}" value="${j}"> ${x}</label>`;
    });
    d.innerHTML+=`<button onclick="check(${i})">Antwort prüfen</button>
    <div class="feedback" id="f${i}"></div>`;
  }
  quiz.appendChild(d);
});

function check(i){
  if(answered[i])return;
  const f=questions[i];
  const sel=[...document.querySelectorAll(`input[name="q${i}"]:checked`)].map(x=>+x.value);
  const ok = sel.length===f.r.length && sel.every(v=>f.r.includes(v));
  document.getElementById("f"+i).innerText =
    ok?"✔ Richtig: "+f.e:"✘ Falsch: "+f.e;
  if(ok)score++;
  answered[i]=true;
  const p=Math.round(score/questions.length*100);
  document.getElementById("ergebnis").innerText=`Punkte: ${score}/${questions.length} (${p}%)`;
  document.getElementById("note").innerText="Note: "+(p>=90?"1":p>=75?"2":p>=60?"3":p>=45?"4":"5/6");
  document.getElementById("highscore").innerText="Highscore: "+Math.round(score*(timeLeft/60));
}

function downloadCSV(){
  const n=document.getElementById("name").value;
  if(!n)return alert("Name eingeben");
  const csv=`Name;Punkte\n${n};${score}`;
  const b=new Blob([csv],{type:"text/csv"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(b);
  a.download="quiz_ergebnis.csv";
  a.click();
}
</script>

</body>
</html>
